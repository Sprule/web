<div fxFlexLayout='column' fxLayoutGap='15px' fxLayoutAlign='center'>
    <div fxFlex>
        <button *ngFor='let category of categories' mat-button (click)='selectCategory(category)'>{{category.name}}</button>
        <hr>
        <button mat-button (click)='selectNewCategory()' color='primary'>New Category</button>
    </div>

    <!-- Edit -->
    <div fxFlex *ngIf='selectedCategory && !creatingNewCategory'>
        <form fxLayout="column" [formGroup]="editFormGroup" (submit)="editCategory(selectedCategory, name.value)">
            <mat-form-field class="full-width">
                <input matInput placeholder="Name" formControlName="nameCtrl" [(ngModel)]='selectedCategory.name' #name>
            </mat-form-field>
        
            <div fxLayoutAlign='end center' fxLayoutGap="10px">
                <button *ngIf="!editLoading" mat-raised-button [disabled]="!editFormGroup.valid" color="primary" type="submit" autofocus>Submit</button>
                <mat-spinner *ngIf="editLoading" [diameter]="26"></mat-spinner>
            </div>
        </form>
    </div>

    <!-- Create -->
    <div fxFlex *ngIf='creatingNewCategory'>
        <form fxLayout="column" [formGroup]="createFormGroup" (submit)="createCategory(name.value)">
            <mat-form-field class="full-width">
                <input matInput placeholder="Name" formControlName="nameCtrl" #name>
            </mat-form-field>
        
            <div fxLayoutAlign='end center' fxLayoutGap="10px">
                <button *ngIf="!createLoading" mat-raised-button [disabled]="!createFormGroup.valid" color="primary" type="submit" autofocus>Create</button>
                <mat-spinner *ngIf="createLoading" [diameter]="26"></mat-spinner>
            </div>
        </form>
    </div>
</div>